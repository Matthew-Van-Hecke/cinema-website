<% layout('layouts/boilerplate') %>

<h1>EDIT MOVIE</h1>
<form action="/movies/<%= foundMovie.id %>?_method=PUT" method="post" enctype="multipart/form-data">
    <input type="hidden" name="id" value="<%= foundMovie.id %>">
    <input type="hidden" name="posterUrl" value="<%= foundMovie.posterUrl %>">
    <input type="hidden" name="bannerUrl" value="<%= foundMovie.bannerUrl %>">
    <div class="form-group pb-3">
        <label for="movie-title">Title</label>
        <input class="form-control" type="text" name="title" id="movie-title" value="<%= foundMovie.title %>">
    </div>
    <div class="form-group pb-3">
        <label for="movie-banner" class="form-label">Banner Image</label>
        <input class="form-control" type="file" name="banner" id="movie-banner">
    </div>
    <div class="form-group pb-3">
        <label for="movie-poster" class="form-label">Poster Image</label>
        <input class="form-control" type="file" name="poster" id="movie-poster">
    </div>
    <div class="form-group pb-3">
        <label for="runtime" class="form-label">Runtime</label>
        <input class="form-control" type="number" name="runtime" id="runtime" value="<%= foundMovie.runtime %> ">
    </div>
    <div class="form-group pb-3">
        <label for="director" class="form-label">Director</label>
        <input class="form-control" type="text" name="director" id="director" value="<%= foundMovie.director %> ">
    </div>
    <div class="form-group pb-3">
        <label for="starring" class="form-label">Starring</label>
        <input class="form-control" type="text" name="starring" id="starring" value="<%= foundMovie.starring %> ">
    </div>
    <div class="form-group pb-3">
        <label for="mpaa" class="form-label">MPAA Rating</label>
        <input class="form-control" type="text" name="mpaa" id="mpaa" value="<%= foundMovie.mpaa %> ">
    </div>
    <div class="form-group pb-3">
        <label for="synopsis" class="form-label">Synopsis</label>
        <textarea class="form-control" name="synopsis" id="synopsis" cols="30" rows="3"><%= foundMovie.synopsis %></textarea>
    </div>
    <button class="btn btn-primary mb-3" type="button" onclick="addShowtime()">Add Showtime</button>
    <div class="form-group pb-3" id="showtimes-div">
        <% foundMovie.showtimes.forEach((showtime, i) => { %>
            <div class="showtime input-group mb-3" id="showtime-<%= i %>">
                <button type="button" class="input-group-text" <%= `onclick="removeShowtime(${i})"` %>>X</button>
                <input type="datetime-local" class="form-control" name="showtime-<%= i %>" value="<%= showtime %>">
            </div>
        <% }) %>
    </div>
    <input class="form-control btn btn-success" type="submit">
</form>